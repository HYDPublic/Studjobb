{% extends "base.html" %}
{% block head %}<script src="/assets/ckeditor/ckeditor.js"></script>{% endblock %}
{% block title %}Rediger {{ job.title }}{% endblock %}
{% block container %}
            <div id="navigation">
                <a class="back" href="/admin">← Tilbake til administrasjon</a>
            </div>

            {% if error %}
            <div id="alert">
                <strong>Ohoh!</strong>
                {{ error }}
            </div>
            {% endif %}

            <form id="edit" method="post">
                
                <div class="left">

                    <div class="field">
                        <label for="place">Sted</label>
                        <input name="place" type="text" value="{{ job.place }}" />
                    </div>

                    <div class="field">
                        <label for="status">Status</label>
                        <select name="status">
                        {% for status in statuses %}
                            {% if job.status == status %} 
                            <option value="{{ status }}" selected>{{ status|title() }}</option>
                            {% else %}
                            <option value="{{ status }}">{{ status|title() }}</option>
                            {% endif %}
                        {% endfor %}
                        </select>
                    </div>

                    <div class="field">
                        <label for="company">Selskap</label>
                        <select name="company">
                        {% for company in companies %}
                            {% if company.id == job.company.id %} 
                            <option value="{{ company.id }}" selected>{{ company.name }}</option>
                            {% else %}
                            <option value="{{ company.id }}">{{ company.name }}</option>
                            {% endif %}
                        {% endfor %}
                        </select>
                    </div>
                    
                    <div class="field">
                        <label for="delete">Slett denne stillingen</label>
                        <input type="checkbox" name="delete" />
                    </div>
                </div>

                <div class="right">

                    <div class="field">
                        <label for="position">Stillingstype</label>
                        <input name="position" type="text" value="{{ job.position }}" />
                    </div>

                    <div class="field">
                        <label for="due_date">Søknadsfrist</label>
                        <input name="due_date" type="date" value="{{ job.due_date }}"/>
                    </div>

                    <div class="field">
                        <label for="start_date">Tiltredelsesdato</label>
                        <input name="start_date" type="date" value="{{ job.start_date }}"/>
                    </div>

                </div>

                <input name="title" type="text" value="{{ job.title }}" />

                <textarea name="description" id="description">
                {{ job.description }}
                </textarea>

                <input class="button" type="submit" value="Lagre" />
            </form>

            <script>
            document.addEventListener('DOMContentLoaded', function () {
                CKEDITOR.config.allowedContent = true;
                CKEDITOR.replace('description'); 
            });
            </script>

{% endblock %}
