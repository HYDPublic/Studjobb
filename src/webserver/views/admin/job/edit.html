{% extends "base.html" %}
{% block head %}<script src="/assets/ckeditor/ckeditor.js"></script>{% endblock %}
{% block title %}Rediger {{ job.title }}{% endblock %}
{% block container %}
{% import 'macros/navigation.html' as navigation %}

    {{ navigation.render_back_links(logged_in = True) }}

        <form action="/admin/stilling/{{ job.id }}/mail" method="post">
            <div class="row">
                <div class="eight columns offset-by-two">
                    
                    <label for="subject">Emne</label>
                    <input name="subject" type="text" class="u-full-width" required/>

                    <label for="to">Mottaker</label>
                    <input name="recipient" type="email" class="u-full-width" required />

                    <label for="when">Sendes</label>
                    <input name="when" type="datetime-local" class="u-full-width" value="{{ reccomended_send_date.strftime('%Y-%m-%dT%H:%m') }}" required />

                    <label for="body">Melding</label>
                    <textarea name="body" class="u-full-width" required></textarea>
                    <input class="button button-primary" type="submit" value="Send e-post" />
                </div>
            </div>
        </form>

        <form method="post">

            <div class="row">         
                
                <div class="eight columns offset-by-two">
                    <hr>
                </div>

                <div class="two columns offset-by-two"> 


                    <label for="place">Sted</label>
                    <input name="place" type="text" value="{{ job.place }}" />

                    <label for="status">Status</label>
                    <select name="status">
                    {% for status in statuses %}
                        {% if job.status == status %} 
                        <option value="{{ status }}" selected>{{ status|title() }}</option>
                        {% else %}
                        <option value="{{ status }}">{{ status|title() }}</option>
                        {% endif %}
                    {% endfor %}
                    </select>

                    <label for="company">Selskap</label>
                    <select name="company">
                    {% for company in companies %}
                        {% if company.id == job.company.id %} 
                        <option value="{{ company.id }}" selected>{{ company.name }}</option>
                        {% else %}
                        <option value="{{ company.id }}">{{ company.name }}</option>
                        {% endif %}
                    {% endfor %}
                    </select>
                </div>

                <div class="four columns offset-by-two"> 

                    <label for="position">Stillingstype</label>
                    <input name="position" type="text" value="{{ job.position }}" />

                    <label for="due_date">SÃ¸knadsfrist</label>
                    <input name="due_date" type="date" value="{{ job.due_date.date }}"/>

                    <label for="start_date">Tiltredelsesdato</label>
                    <input name="start_date" type="date" value="{{ job.start_date.date }}"/>
                </div>
            </div>


            <div class="row">
                
                <div class="eight columns offset-by-two">
                    
                    <label for="title">Tittel</label>
                    <input name="title" type="text" value="{{ job.title }}" class="u-full-width"/>

                    <textarea name="description" id="description">
                    {{ job.description }}
                    </textarea>

                    <input class="button button-primary" type="submit" value="Lagre" />
                </div>
            </div>
    </form>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        CKEDITOR.config.allowedContent = true;
        CKEDITOR.replace('description'); 
    });
    </script>

{% endblock %}
